<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>84 - Largest Rectangle in Histogram | LeetCode In The Shell</title>
    <link rel="stylesheet" href="../../css/style.css" />
    <link rel="stylesheet" href="../../css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="../../">Home</a></li>
      
      <li><a href="../../about/">About</a></li>
      
      <li><a href="../../categories/">Categories</a></li>
      
      <li><a href="../../tags/">Tags</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">84 - Largest Rectangle in Histogram</span></h1>
<h2 class="author">[alfmunny]</h2>
<h2 class="date">2020/03/23</h2>
</div>

<main>
<p><a href="https://leetcode.com/problems/largest-rectangle-in-histogram/">leetcode</a></p>
<h2 id="problem">Problem</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Given n non-negative integers representing the histogram&#39;s bar height where the width of each bar is 1, find the area of largest rectangle in the histogram.

Example:

Input: [2,1,5,6,2,3]
Output: 10
</code></pre></div><p><img src="../../ox-hugo/2020-03-23_00-34-37_histogram.png" alt="">
Above is a histogram where width of each bar is 1, given height = [2,1,5,6,2,3].</p>
<p><img src="../../ox-hugo/2020-03-23_00-35-27_histogram_area.png" alt="">
The largest rectangle is shown in the shaded area, which has area = 10 unit.</p>
<h2 id="notes">Notes</h2>
<p>Main idea is to caculate both left edge and right edge for every entry in the array</p>
<p>Two ways of solution.</p>
<h3 id="iterative">Iterative</h3>
<p>Generate two arrays left[] and right[] to keep the two edges of every entry.</p>
<ol>
<li>one loop to caculate left[].</li>
<li>one loop to caculate right[].</li>
<li>one loop to go through all the edges to caculate the square.</li>
</ol>
<h3 id="stack">Stack</h3>
<p>Create a stack to store the index of the entry.</p>
<ol>
<li>if current entry is smaller than the top, we find the right edge of the top entry. pop it out and caculate the the max square of the top entry</li>
<li>if current entry is not smaller than the top, push it into stack</li>
<li>go through the left entries in the stack. The lefts ones are all have the longest bar at the top.</li>
</ol>
<h2 id="solution">Solution</h2>
<h3 id="solution-1-iterative">Solution 1: iterative</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span>:
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">largestRectangleArea</span>(self, heights):

        <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> heights:
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>

        n <span style="color:#f92672">=</span> len(heights)
        res <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>

        left <span style="color:#f92672">=</span> [ i <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n) ]
        right <span style="color:#f92672">=</span> [ i <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n) ]

        <span style="color:#75715e"># caculate for the left edge</span>
        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
            p <span style="color:#f92672">=</span> i
            <span style="color:#66d9ef">while</span> p <span style="color:#f92672">&gt;</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>:
                <span style="color:#66d9ef">if</span> heights[p] <span style="color:#f92672">&lt;</span> heights[i]:
                    <span style="color:#66d9ef">break</span>
                p <span style="color:#f92672">-</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
            left[i] <span style="color:#f92672">=</span> p

        <span style="color:#75715e"># caculate for the right edge</span>
        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
            p <span style="color:#f92672">=</span> i
            <span style="color:#66d9ef">while</span> p <span style="color:#f92672">&lt;</span> n:
                <span style="color:#66d9ef">if</span> heights[p] <span style="color:#f92672">&lt;</span> heights[i]:
                    <span style="color:#66d9ef">break</span>
                p <span style="color:#f92672">+</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
            right[i] <span style="color:#f92672">=</span> p

        <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(n):
            res <span style="color:#f92672">=</span> max(res, heights[i] <span style="color:#f92672">*</span> (right[i] <span style="color:#f92672">-</span> left[i] <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>))

        <span style="color:#66d9ef">return</span> res

<span style="color:#66d9ef">print</span>(Solution()<span style="color:#f92672">.</span>largestRectangleArea([<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]))
</code></pre></div><h3 id="solution-2-stack">Solution 2: stack</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Solution</span>:
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">largestRectangleArea</span>(self, heights):

        stack <span style="color:#f92672">=</span> []
        n <span style="color:#f92672">=</span> len(heights)
        res <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
        index <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>

        <span style="color:#66d9ef">while</span> index <span style="color:#f92672">&lt;</span> n:

            <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> stack <span style="color:#f92672">or</span> heights[stack[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]] <span style="color:#f92672">&lt;</span><span style="color:#f92672">=</span> heights[index]:
                stack<span style="color:#f92672">.</span>append(index)
                index <span style="color:#f92672">+</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>

            <span style="color:#66d9ef">else</span>:
                top <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span>pop()
                area <span style="color:#f92672">=</span> (heights[top] <span style="color:#f92672">*</span>
                        ((index <span style="color:#f92672">-</span> stack[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">if</span> stack <span style="color:#66d9ef">else</span> index))

                res <span style="color:#f92672">=</span> max(res, area)

        <span style="color:#66d9ef">while</span> stack:
            h <span style="color:#f92672">=</span> stack<span style="color:#f92672">.</span>pop()
            res <span style="color:#f92672">=</span> max(
                res,
                heights[h] <span style="color:#f92672">*</span> ((index <span style="color:#f92672">-</span> stack[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">if</span> stack <span style="color:#66d9ef">else</span> index))

        <span style="color:#66d9ef">return</span> res


<span style="color:#66d9ef">print</span>(Solution()<span style="color:#f92672">.</span>largestRectangleArea([<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]))
</code></pre></div>
</main>

  <footer>
  
  
  <hr/>
  Â© <a href="http://alfmunny.com">Alfmunny</a> 2017 &ndash; 2019 | <a href="https://github.com/alfmunny">Github</a> | <a href="https://twitter.com/alfmunny">Twitter</a>
  
  </footer>
  </body>
</html>

